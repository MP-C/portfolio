<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opera√ß√£o Regresso üè†</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f0f4f8; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .hero { background: linear-gradient(135deg, #003366, #00509d); color: white; padding: 50px 0; text-align: center; border-bottom: 5px solid #ffca28; }
        .avatar-3d { font-size: 4rem; display: block; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2)); transition: 0.3s; cursor: pointer; user-select: none; }
        .avatar-3d:active { transform: scale(0.9); }
        .card-pessoa { border-radius: 20px; border: none; box-shadow: 0 10px 20px rgba(0,0,0,0.05); transition: 0.3s; }
        .card-pessoa:hover { transform: translateY(-5px); }
        .voto-item { background: white; margin-bottom: 5px; padding: 10px; border-radius: 10px; border-left: 5px solid #00509d; }
        .bubble { background: #e9ecef; padding: 10px; border-radius: 15px; min-height: 60px; display: flex; align-items: center; justify-content: center; font-style: italic; }
    </style>
</head>
<body>

<div class="hero mb-5">
    <h1>üìç Opera√ß√£o Regresso 2026</h1>
    <p class="lead">Clica nas nossas caras! Quem acertar o dia ganha um jantar!</p>
</div>

<div class="container">
    <div class="row text-center mb-5">
        <div class="col-md-4 mb-3">
            <div class="card card-pessoa p-4 h-100">
                <span class="avatar-3d" onclick="mudarFrase('mario')">üßî‚Äç‚ôÇÔ∏è</span>
                <h3 class="mt-3">M√°rio</h3>
                <div class="bubble mb-3">
                    <p id="frase-mario" class="small m-0">"J√° estou a embalar a cave."</p>
                </div>
                <div class="badge bg-primary">50% Pronto</div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card card-pessoa p-4 h-100">
                <span class="avatar-3d" onclick="mudarFrase('joana')">üë©‚Äçü¶∞</span>
                <h3 class="mt-3">Joana</h3>
                <div class="bubble mb-3">
                    <p id="frase-joana" class="small m-0">"A controlar a log√≠stica e a ansiedade."</p>
                </div>
                <div class="badge bg-danger">Mala a 15%</div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card card-pessoa p-4 h-100">
                <span class="avatar-3d" onclick="mudarFrase('lourenco')">üë∂</span>
                <h3 class="mt-3">Louren√ßo</h3>
                <div class="bubble mb-3">
                    <p id="frase-lourenco" class="small m-0">"S√≥ quero saber se h√° espa√ßo para os brinquedos."</p>
                </div>
                <div class="badge bg-success">S√≥ quer mimos</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="p-4 bg-white shadow rounded-4">
                <h4>üìÖ Quando √© que chegamos?</h4>
                <p class="small text-muted">Vota no dia de 2026 que achas que vamos aterrar.</p>
                <input type="text" id="nome" class="form-control mb-2" placeholder="Teu Nome">
                <input type="date" id="data" class="form-control mb-3" min="2026-01-01" max="2026-12-31">
                <button id="btnVotar" onclick="votar()" class="btn btn-primary w-100 fw-bold">Submeter Aposta!</button>
            </div>
        </div>

        <div class="col-md-6">
            <div class="p-4 bg-light border rounded-4 h-100">
                <h4>üìä Quem j√° apostou:</h4>
                <div id="lista-votos" class="mt-3">
                    <p class="text-muted">A carregar apostas...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // COLOCA AQUI O TEU URL (Ex: https://script.google.com/macros/s/XXXXX/exec)
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwVtXQxkYVbyP-y8yGu0paJ_QX7A2oMIw0M4SlkEwhmTOQ7RFp-EUB5GIUoxdYXa-kicA/exec";
    const frases = {
        mario: ["J√° estou a embalar a cave.", "Vai ser dif√≠cil dizer 'At√© j√°!'", "Vou precisar de uma carrinha s√≥ para os gadgets.", "Quem me ajuda com os servidores?", "Saudades de um pastel de nata!", "Docker pronto para a migra√ß√£o f√≠sica."],
        joana: ["A controlar a log√≠stica e a ansiedade.", "Estava dif√≠cil convencer o M√°rio!", "Quantas malas √© que o beb√© precisa?!", "S√≥ de pensar na viagem j√° estou cansada.", "Vou chegar e ir direta para a praia!", "Faltam X mil abra√ßos."],
        lourenco: ["S√≥ quero saber dos brinquedos!", "J√° chegamos?", "O avi√£o tem Wi-Fi para o Panda?", "Vou andar no colo de muita gente!", "Gugu dada?", "Preparem as bochechas! Vou com tudo e 6 dentes"]
    };

    let indices = { mario: 0, joana: 0, lourenco: 0 };

    function mudarFrase(pessoa) {
        indices[pessoa] = (indices[pessoa] + 1) % frases[pessoa].length;
        document.getElementById(`frase-${pessoa}`).innerText = `"${frases[pessoa][indices[pessoa]]}"`;
    }

    async function votar() {
        const nome = document.getElementById('nome').value.trim();
        const data = document.getElementById('data').value;

        if(!nome || !data) return alert("Preenche tudo!");
        if(localStorage.getItem('ja_votei')) return alert("J√° votaste! üòâ");

        const btn = document.getElementById("btnVotar");
        btn.disabled = true;
        btn.innerText = "A enviar...";

        // Enviar via formul√°rio oculto (mais fi√°vel para o Google sem erros de CORS)
        const formData = new FormData();
        formData.append('nome', nome);
        formData.append('data', data);

        try {
            await fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: new URLSearchParams(formData)
            });

            // Como o no-cors n√£o permite ler a resposta, assumimos sucesso ap√≥s o envio
            localStorage.setItem('ja_votei', 'true');
            alert("‚úÖ Aposta enviada! Se n√£o aparecer na lista, refresca a p√°gina em 10 segundos.");
            setTimeout(() => location.reload(), 1500);
        } catch (e) {
            alert("Erro na liga√ß√£o. Tenta de novo.");
            btn.disabled = false;
        }
    }

    async function renderizarVotos() {
        if(!SCRIPT_URL || SCRIPT_URL.includes("COLA_AQUI")) return;
        
        const lista = document.getElementById('lista-votos');
        try {
            const res = await fetch(SCRIPT_URL);
            const dados = await res.json();
            
            if(!dados || dados.length === 0) {
                lista.innerHTML = '<p class="text-muted small">Ainda ningu√©m arriscou!</p>';
                return;
            }

            dados.sort((a,b) => new Date(a[1]) - new Date(b[1]));

            lista.innerHTML = dados.map(v => `
                <div class="voto-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <strong>${v[0]}</strong>
                        <span class="badge bg-dark">${new Date(v[1]).toLocaleDateString('pt-PT')}</span>
                    </div>
                </div>
            `).join('');
        } catch (e) {
            lista.innerHTML = '<p class="text-danger small">Clica no bot√£o para votar!</p>';
        }
    }

    window.onload = renderizarVotos;
</script>
</body>
</html>
    